<!DOCTYPE html>
<html>
<head>
    <title>User Application</title>
    <link rel="SHORTCUT ICON" href="./resources/user-icon.ico" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./resources/css/font-awesome.css" />
    <link rel="stylesheet" href="./resources/style.css" />
    <script src="user-service.js"></script>
</head>
<body>

<div class="container">
  
  <img class="header-icon" src="./resources/user-icon.png" /> 
  <span class="display-3">User Application</span>
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
  <div class="container">
    <a class="navbar-brand" href="./index.html">User Application</a>
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link"><span>Welcome </span><span id="username"></span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" onclick="logoutUser()">Logout</a>
      </li>
       <li class="nav-item">
            <a class="nav-link" onclick="EditUser()">Edit<i class="fa fa-pencil text-primary" aria-hidden="true" ></i></a> 
           
      
      </li>
    </ul>
  </div>
</nav>

<div class="container"><br>
    <h3>User Details:</h3>
    <div class="form-group">
        <label for="firstName">First Name</label><br/><h4 id="firstName"></h4>
    </div>
    <div class="form-group">
        <label for="lastName">Last Name</label><br/><h4 id="lastName"></h4>
    </div>
    <div class="form-group">
        <label for="email">Email</label><br/><h4 id="email"></h4>
    </div>
    <div class="form-group">
        <label for="mobNum">Mobile Number</label><br/><h4 id="mobNum"></h4>
    </div>
</div>
<script>
 var loggedUser = JSON.parse(localStorage.getItem('loggedUser'));
var userList = [];
$(document).ready(function(){
   getUserDetail();
})
function getUserDetail(){
   
    if(!loggedUser){
        logoutUser();
        return;
    }
    console.log('loggedUser : ', loggedUser);
    console.log('loggedUser : ', typeof loggedUser);
    $('#username').html(loggedUser.firstName+' '+loggedUser.lastName);
    $('#firstName').html(loggedUser.firstName);
    $('#lastName').html(loggedUser.lastName);
    $('#email').html(loggedUser.email);
    $('#mobNum').html(loggedUser.mobNum);
}
 ;
function logoutUser(){
    localStorage.removeItem('loggedUser');
    window.location.href="./login.html";
}
function EditUser(){
   localStorage.setItem('editUserEmail',loggedUser.email);
     // console.log('userList : ', loggedUser.email);
  window.location.href="./updateUser.html";
}
 //
</script>
</body>
</html>